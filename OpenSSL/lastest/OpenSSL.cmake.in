cmake_minimum_required(VERSION 3.10)
project(OpenSSL--install NONE)

#==========================================
#Header
#==========================================
find_package(OpenSSL  QUIET)
if(NOT OpenSSL_FOUND AND NOT OpenSSL_FIND_VERSION_EXACT)
    include(ExternalProject)
    if(NOT WIN32)
 # Linux or OSX Setting
        ExternalProject_Add(
        OpenSSL
        #URL 
        GIT_REPOSITORY https://github.com/openssl/openssl.git
        #GIT_TAG 
        SOURCE_DIR ${CMAKE_BINARY_DIR}/repo/OpenSSL
        #CMAKE_ARGS "-DCMAKE_INSTALL_PREFIX=$ENV{HOME}/.cppm/local"
        CONFIGURE_COMMAND ./config
        BUILD_COMMAND make
        INSTALL_COMMAND make install
        BUILD_IN_SOURCE true
        )
    else(NOT WIN32)
 # Windows Setting
        ExternalProject_Add(
        OpenSSL
        #URL 
        GIT_REPOSITORY https://github.com/openssl/openssl.git
        #GIT_TAG 
        SOURCE_DIR ${CMAKE_BINARY_DIR}/repo/OpenSSL
        #CMAKE_ARGS "-DCMAKE_INSTALL_PREFIX=$ENV{HOME}/.cppm/local "
        CONFIGURE_COMMAND ./config 
        BUILD_COMMAND make
        INSTALL_COMMAND make install
        BUILD_IN_SOURCE true
        )
    endif(NOT WIN32)
endif()
#==========================================
#Footer
#==========================================

